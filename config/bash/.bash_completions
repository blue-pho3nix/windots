#!/usr/bin/env bash

# shellcheck disable=SC1090,SC1091

# Builtin Git Bash completion
source /mingw64/share/git/completion/git-completion.bash
if type __git_complete >/dev/null 2>&1; then __git_complete g git; fi

# Custom locations for additional completion files
CUSTOM_COMPLETIONS="$DOTFILES/config/bash/custom/completions"

for file in "$CUSTOM_COMPLETIONS"/*.bash; do
	filename=$(basename "$file")
	if command -v "${filename%.*}" >/dev/null 2>&1; then
		. "$file"
	fi
done

# Vagrant
if type vagrant >/dev/null 2>&1; then
	vagrant_complete=$(find "/c/Program Files/Vagrant" -type f | grep completion.sh)
	if [ -f "$vagrant_complete" ]; then . "$vagrant_complete"; fi
fi

# Terraform
if type terraform >/dev/null 2>&1; then
	complete -C "$(which terraform)" terraform
fi

# pipenv
if type pipenv >/dev/null 2>&1; then
	eval "$(_PIPENV_COMPLETE=bash_source pipenv)"
fi

# pipx
if type pipx >/dev/null 2>&1; then
	eval "$(register-python-argcomplete pipx)"
fi
